{
  "version": 3,
  "sources": ["../src/ui/chat.ts", "../src/ui/documents.ts", "../src/ui/projects.ts", "../src/ui/dashboard.ts", "../src/core/Component.ts", "../src/components/Header.ts", "../src/components/ChatPanel.ts", "../src/components/ContextPanel.ts", "../src/components/SourcesPanel.ts", "../src/main.ts"],
  "sourcesContent": ["const API_URL = '/api/v1';\n\ntype ModuleId = 'default' | 'ksef' | 'b2b' | 'zus' | 'vat';\n\nconst MODULES: Record<ModuleId, { name: string; icon: string }> = {\n  default: { name: 'Og\u00F3lne', icon: '\uD83D\uDCAC' },\n  ksef: { name: 'KSeF', icon: '\uD83D\uDCC4' },\n  b2b: { name: 'B2B', icon: '\uD83D\uDCBC' },\n  zus: { name: 'ZUS', icon: '\uD83C\uDFE5' },\n  vat: { name: 'VAT', icon: '\uD83D\uDCB0' },\n};\n\ntype ChatRole = 'user' | 'assistant';\n\ninterface ChatSource {\n  title: string;\n  source: string;\n  similarity: number;\n}\n\nfunction initChannels(): void {\n  const channelItems = document.querySelectorAll<HTMLElement>('.channel-item');\n  if (!channelItems.length) return;\n\n  channelItems.forEach((item) => {\n    item.addEventListener('click', () => {\n      const moduleId = item.dataset.module as ModuleId | undefined;\n      if (!moduleId) return;\n\n      channelItems.forEach((i) => i.classList.remove('active'));\n      item.classList.add('active');\n      setModule(moduleId);\n    });\n  });\n}\n\ninterface ChatResponse {\n  response: string;\n  sources?: ChatSource[];\n}\n\ninterface ChatElements {\n  messages: HTMLElement | null;\n  form: HTMLFormElement | null;\n  input: HTMLTextAreaElement | HTMLInputElement | null;\n  sendBtn: HTMLButtonElement | null;\n  status: HTMLElement | null;\n  statusText: HTMLElement | null;\n  currentModule: HTMLElement | null;\n  charCount: HTMLElement | null;\n  sourcesPanel: HTMLElement | null;\n  sourcesList: HTMLUListElement | null;\n  closeSources: HTMLElement | null;\n  quickQuestions: HTMLElement | null;\n}\n\nconst elements: ChatElements = {\n  messages: document.getElementById('messages'),\n  form: document.getElementById('chat-form') as HTMLFormElement | null,\n  input: document.getElementById('user-input') as HTMLTextAreaElement | HTMLInputElement | null,\n  sendBtn: document.getElementById('send-btn') as HTMLButtonElement | null,\n  status: document.getElementById('status'),\n  statusText: document.querySelector('.status-text') as HTMLElement | null,\n  currentModule: document.getElementById('current-module'),\n  charCount: document.getElementById('char-count'),\n  sourcesPanel: document.getElementById('sources-panel'),\n  sourcesList: document.getElementById('sources-list') as HTMLUListElement | null,\n  closeSources: document.getElementById('close-sources'),\n  quickQuestions: document.getElementById('quick-questions'),\n};\n\nlet currentModule: ModuleId = 'default';\nlet isLoading = false;\nlet lastSources: ChatSource[] = [];\n\nexport function initChat(): void {\n  if (!elements.form || !elements.input || !elements.messages) return;\n\n  initModuleButtons();\n  initChannels();\n  initForm();\n  initQuickQuestions();\n  initSourcesPanel();\n  void checkHealth();\n\n  elements.input.focus();\n}\n\nfunction initModuleButtons(): void {\n  const buttons = document.querySelectorAll<HTMLElement>('.module-btn');\n  buttons.forEach((btn) => {\n    const moduleId = btn.dataset.module as ModuleId | undefined;\n    if (!moduleId) return; // pomi\u0144 przycisk Edycji\n    btn.addEventListener('click', () => {\n      setModule(moduleId);\n    });\n  });\n}\n\nfunction initForm(): void {\n  const { form, input, charCount } = elements;\n  if (!form || !input) return;\n\n  form.addEventListener('submit', async (e) => {\n    e.preventDefault();\n    const message = input.value.trim();\n    if (!message || isLoading) return;\n    await sendMessage(message);\n  });\n\n  input.addEventListener('input', () => {\n    if (!charCount) return;\n    const count = input.value.length;\n    charCount.textContent = `${count}/2000`;\n  });\n\n  input.addEventListener('keydown', (e) => {\n    const ev = e as KeyboardEvent;\n    if (ev.key === 'Enter' && !ev.shiftKey) {\n      ev.preventDefault();\n      form.dispatchEvent(new Event('submit'));\n    }\n  });\n}\n\nasync function sendMessage(message: string): Promise<void> {\n  isLoading = true;\n  setLoadingState(true);\n\n  if (elements.quickQuestions) {\n    elements.quickQuestions.style.display = 'none';\n  }\n\n  addMessage(message, 'user');\n  if (elements.input && elements.charCount) {\n    elements.input.value = '';\n    elements.charCount.textContent = '0/2000';\n  }\n\n  const loadingId = addMessage('', 'assistant', true);\n\n  try {\n    const response = await fetch(`${API_URL}/chat`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({\n        message,\n        module: currentModule,\n      }),\n    });\n\n    if (!response.ok) {\n      throw new Error(`HTTP ${response.status}`);\n    }\n\n    const data = (await response.json()) as ChatResponse;\n    removeMessage(loadingId);\n    addMessage(data.response, 'assistant', false, data.sources || []);\n    lastSources = data.sources || [];\n  } catch (error) {\n    console.error('Error:', error);\n    removeMessage(loadingId);\n    addMessage(\n      'Przepraszam, wyst\u0105pi\u0142 b\u0142\u0105d po\u0142\u0105czenia. Sprawd\u017A czy serwisy dzia\u0142aj\u0105 (docker compose ps) i spr\u00F3buj ponownie.',\n      'assistant',\n    );\n  } finally {\n    isLoading = false;\n    setLoadingState(false);\n    elements.input?.focus();\n  }\n}\n\nfunction addMessage(text: string, role: ChatRole, isLoadingMsg = false, sources?: ChatSource[] | null): string {\n  const id = `msg-${Date.now()}-${Math.random().toString(36).slice(2)}`;\n\n  if (!elements.messages) return id;\n\n  const messageDiv = document.createElement('div');\n  messageDiv.id = id;\n  messageDiv.className = `message ${role}${isLoadingMsg ? ' loading' : ''}`;\n\n  const avatar = role === 'user' ? '\uD83D\uDC64' : '\uD83E\uDD85';\n\n  let contentHtml = formatMessage(text);\n\n  if (sources && sources.length > 0) {\n    contentHtml += `\n            <div class=\"sources-link\" onclick=\"showSources()\">\n                \uD83D\uDCDA Zobacz \u017Ar\u00F3d\u0142a (${sources.length})\n            </div>\n        `;\n  }\n\n  messageDiv.innerHTML = `\n        <div class=\"message-avatar\">${avatar}</div>\n        <div class=\"message-content\">${contentHtml}</div>\n    `;\n\n  elements.messages.appendChild(messageDiv);\n  scrollToBottom();\n\n  return id;\n}\n\nfunction removeMessage(id: string): void {\n  const el = document.getElementById(id);\n  if (el) el.remove();\n}\n\nfunction formatMessage(text: string): string {\n  if (!text) return '';\n\n  let safe = text\n    .replace(/&/g, '&amp;')\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;');\n\n  safe = safe.replace(/\\*\\*(.+?)\\*\\*/g, '<strong>$1</strong>');\n  safe = safe.replace(/```([\\s\\S]*?)```/g, '<pre><code>$1</code></pre>');\n  safe = safe.replace(/`(.+?)`/g, '<code>$1</code>');\n  safe = safe.replace(/\\n\\n/g, '</p><p>');\n  safe = safe.replace(/\\n/g, '<br>');\n\n  if (!safe.startsWith('<p>')) {\n    safe = `<p>${safe}</p>`;\n  }\n\n  return safe;\n}\n\nfunction scrollToBottom(): void {\n  if (!elements.messages) return;\n  elements.messages.scrollTop = elements.messages.scrollHeight;\n}\n\nfunction setLoadingState(loading: boolean): void {\n  if (elements.sendBtn) elements.sendBtn.disabled = loading;\n  if (elements.input) elements.input.disabled = loading;\n}\n\nfunction initQuickQuestions(): void {\n  const buttons = document.querySelectorAll<HTMLElement>('.quick-btn');\n  if (!buttons.length) return;\n\n  buttons.forEach((btn) => {\n    btn.addEventListener('click', () => {\n      const question = btn.dataset.question || '';\n      const moduleId = btn.dataset.module as ModuleId | undefined;\n\n      if (moduleId && moduleId !== currentModule) {\n        setModule(moduleId);\n      }\n\n      if (elements.input) {\n        elements.input.value = question;\n        elements.form?.dispatchEvent(new Event('submit'));\n      }\n    });\n  });\n}\n\nfunction initSourcesPanel(): void {\n  if (elements.closeSources) {\n    elements.closeSources.addEventListener('click', hideSources);\n  }\n\n  document.addEventListener('click', (e) => {\n    if (!elements.sourcesPanel) return;\n\n    const target = e.target as HTMLElement | null;\n    if (!target) return;\n\n    const clickedInsidePanel = elements.sourcesPanel.contains(target);\n    const isSourcesLink = target.classList.contains('sources-link');\n\n    if (!clickedInsidePanel && !isSourcesLink) {\n      hideSources();\n    }\n  });\n}\n\nfunction showSources(): void {\n  if (!elements.sourcesPanel || !elements.sourcesList) return;\n  if (!lastSources.length) return;\n\n  elements.sourcesList.innerHTML = lastSources\n    .map(\n      (source) => `\n        <li>\n            <div class=\"source-title\">${escapeHtml(source.title)}</div>\n            <div class=\"source-meta\">\n                ${escapeHtml(source.source)}\n                <span class=\"source-similarity\">${Math.round(source.similarity * 100)}%</span>\n            </div>\n        </li>\n    `,\n    )\n    .join('');\n\n  elements.sourcesPanel.classList.remove('hidden');\n  elements.sourcesPanel.classList.add('visible');\n}\n\nfunction hideSources(): void {\n  if (!elements.sourcesPanel) return;\n  elements.sourcesPanel.classList.remove('visible');\n  setTimeout(() => {\n    elements.sourcesPanel && elements.sourcesPanel.classList.add('hidden');\n  }, 300);\n}\n\nasync function checkHealth(): Promise<void> {\n  try {\n    const baseUrl = API_URL.replace('/api/v1', '');\n    const response = await fetch(`${baseUrl}/health`);\n    const data = await response.json();\n\n    if (!elements.status || !elements.statusText) return;\n\n    if (data.status === 'healthy') {\n      elements.status.classList.add('healthy');\n      elements.status.classList.remove('unhealthy');\n      elements.statusText.textContent = 'Po\u0142\u0105czono z Bielikiem';\n    } else if (data.status === 'degraded') {\n      elements.statusText.textContent = 'Cz\u0119\u015Bciowo dost\u0119pny';\n      if (data.services?.model === 'not_loaded') {\n        elements.statusText.textContent = '\u0141adowanie modelu...';\n      }\n    } else {\n      elements.status.classList.add('unhealthy');\n      elements.statusText.textContent = 'B\u0142\u0105d po\u0142\u0105czenia';\n    }\n  } catch (error) {\n    console.error('Health check failed:', error);\n    if (elements.status && elements.statusText) {\n      elements.status.classList.add('unhealthy');\n      elements.statusText.textContent = 'Brak po\u0142\u0105czenia';\n    }\n  } finally {\n    setTimeout(() => {\n      void checkHealth();\n    }, 30000);\n  }\n}\n\nfunction setModule(module: ModuleId): void {\n  currentModule = module;\n\n  document.querySelectorAll<HTMLElement>('.module-btn').forEach((btn) => {\n    btn.classList.toggle('active', btn.dataset.module === module);\n  });\n\n  if (elements.currentModule) {\n    const info = MODULES[module];\n    elements.currentModule.textContent = `Modu\u0142: ${info.name}`;\n  }\n\n  const messages: Record<ModuleId, string> = {\n    default: 'Zadaj dowolne pytanie dotycz\u0105ce prowadzenia firmy w Polsce.',\n    ksef: 'Pytaj o Krajowy System e-Faktur: terminy wdro\u017Cenia, wymagania techniczne, procedury.',\n    b2b: 'Pomog\u0119 oceni\u0107 ryzyko Twojej umowy B2B wed\u0142ug kryteri\u00F3w Inspekcji Pracy.',\n    zus: 'Oblicz\u0119 sk\u0142adki ZUS i wyja\u015Bni\u0119 zasady ubezpiecze\u0144 dla przedsi\u0119biorc\u00F3w.',\n    vat: 'Pomog\u0119 z JPK_VAT, VAT OSS i innymi rozliczeniami podatkowymi.',\n  };\n\n  addMessage(messages[module], 'assistant');\n  elements.input?.focus();\n}\n\nfunction escapeHtml(text: string): string {\n  return text\n    .replace(/&/g, '&amp;')\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;')\n    .replace(/\"/g, '&quot;')\n    .replace(/'/g, '&#039;');\n}\n\n// Utrzymanie kompatybilno\u015Bci z istniej\u0105cym HTML i innymi modu\u0142ami\ndeclare global {\n  interface Window {\n    showSources?: () => void;\n    setModule?: (module: ModuleId) => void;\n  }\n}\n\nif (typeof window !== 'undefined') {\n  window.showSources = showSources;\n  window.setModule = setModule;\n}\n\n", "const API_URL = '/api/v1';\n\ninterface DocumentDto {\n  id: number;\n  title: string;\n  source?: string | null;\n  category: string;\n  content: string;\n}\n\ninterface DomainEventDto {\n  id: string;\n  event_type?: string;\n  eventType?: string;\n  created_at?: string;\n  createdAt?: string;\n}\n\nlet currentDocumentId: number | null = null;\n\nfunction getElements() {\n  return {\n    documentsList: document.getElementById('documents-list') as HTMLUListElement | null,\n    documentsRefresh: document.getElementById('documents-refresh') as HTMLButtonElement | null,\n    docTitle: document.getElementById('doc-title') as HTMLInputElement | null,\n    docCategory: document.getElementById('doc-category') as HTMLInputElement | null,\n    docContent: document.getElementById('doc-content') as HTMLTextAreaElement | null,\n    docNew: document.getElementById('doc-new') as HTMLButtonElement | null,\n    docDelete: document.getElementById('doc-delete') as HTMLButtonElement | null,\n    docSave: document.getElementById('doc-save') as HTMLButtonElement | null,\n    documentEvents: document.getElementById('document-events') as HTMLUListElement | null,\n  };\n}\n\nexport function initDocumentsPanel(): void {\n  const els = getElements();\n  if (!els.documentsList) return;\n\n  els.documentsRefresh?.addEventListener('click', loadDocuments);\n  els.docNew?.addEventListener('click', () => {\n    currentDocumentId = null;\n    clearDocumentEditor();\n  });\n  els.docSave?.addEventListener('click', saveDocument);\n  els.docDelete?.addEventListener('click', deleteDocument);\n\n  void loadDocuments();\n}\n\nasync function loadDocuments(): Promise<void> {\n  const els = getElements();\n  if (!els.documentsList) return;\n  try {\n    const resp = await fetch(`${API_URL.replace('/api/v1', '')}/api/v1/documents?limit=50`);\n    if (!resp.ok) throw new Error(`HTTP ${resp.status}`);\n    const docs = (await resp.json()) as DocumentDto[];\n    renderDocumentsList(docs || []);\n  } catch (err) {\n    console.error('Nie uda\u0142o si\u0119 pobra\u0107 dokument\u00F3w:', err);\n  }\n}\n\nfunction renderDocumentsList(docs: DocumentDto[]): void {\n  const els = getElements();\n  if (!els.documentsList) return;\n\n  els.documentsList.innerHTML = '';\n  docs.forEach((doc) => {\n    const li = document.createElement('li');\n    li.className = 'document-item';\n    li.dataset.id = String(doc.id);\n    li.textContent = `${doc.title} (${doc.category})`;\n    li.addEventListener('click', () => {\n      selectDocument(doc, li);\n    });\n    els.documentsList!.appendChild(li);\n  });\n}\n\nfunction selectDocument(doc: DocumentDto, element: HTMLLIElement | null): void {\n  currentDocumentId = doc.id;\n  document.querySelectorAll<HTMLLIElement>('.document-item').forEach((li) => li.classList.remove('active'));\n  if (element) element.classList.add('active');\n\n  const els = getElements();\n  if (els.docTitle) els.docTitle.value = doc.title || '';\n  if (els.docCategory) els.docCategory.value = doc.category || '';\n  if (els.docContent) els.docContent.value = doc.content || '';\n\n  void loadDocumentEvents(doc.id);\n}\n\nfunction clearDocumentEditor(): void {\n  document.querySelectorAll<HTMLLIElement>('.document-item').forEach((li) => li.classList.remove('active'));\n  const els = getElements();\n  if (els.docTitle) els.docTitle.value = '';\n  if (els.docCategory) els.docCategory.value = '';\n  if (els.docContent) els.docContent.value = '';\n  if (els.documentEvents) {\n    els.documentEvents.innerHTML = '';\n  }\n}\n\nasync function loadDocumentEvents(documentId: number): Promise<void> {\n  const els = getElements();\n  if (!els.documentEvents) return;\n  try {\n    const resp = await fetch(`${API_URL}/events/documents/${documentId}`);\n    if (!resp.ok) throw new Error(`HTTP ${resp.status}`);\n    const events = (await resp.json()) as DomainEventDto[];\n    renderDocumentEvents(events || []);\n  } catch (err) {\n    console.error('Nie uda\u0142o si\u0119 pobra\u0107 historii dokumentu:', err);\n  }\n}\n\nfunction renderDocumentEvents(events: DomainEventDto[]): void {\n  const els = getElements();\n  if (!els.documentEvents) return;\n\n  els.documentEvents.innerHTML = events\n    .map((ev) => {\n      const ts = ev.created_at || ev.createdAt;\n      const when = ts ? new Date(ts).toLocaleString('pl-PL') : '';\n      const type = ev.event_type || ev.eventType || '';\n      return `<li>[${when}] ${escapeHtml(type)}</li>`;\n    })\n    .join('');\n}\n\nasync function saveDocument(): Promise<void> {\n  const els = getElements();\n  if (!els.docTitle || !els.docCategory || !els.docContent) return;\n\n  const title = els.docTitle.value.trim();\n  const category = els.docCategory.value.trim() || 'default';\n  const content = els.docContent.value.trim();\n\n  if (!title || !content) {\n    alert('Tytu\u0142 i tre\u015B\u0107 dokumentu nie mog\u0105 by\u0107 puste.');\n    return;\n  }\n\n  const payload = { title, category, content, source: null as string | null };\n\n  try {\n    let url: string;\n    let body: any;\n\n    if (currentDocumentId) {\n      url = `${API_URL}/commands/documents/update`;\n      body = {\n        id: currentDocumentId,\n        title,\n        source: null,\n        category,\n        content,\n      };\n    } else {\n      url = `${API_URL}/commands/documents/create`;\n      body = payload;\n    }\n\n    const resp = await fetch(url, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(body),\n    });\n\n    if (!resp.ok) throw new Error(`HTTP ${resp.status}`);\n    const doc = (await resp.json()) as DocumentDto;\n    currentDocumentId = doc.id;\n    await loadDocuments();\n  } catch (err) {\n    console.error('Nie uda\u0142o si\u0119 zapisa\u0107 dokumentu:', err);\n    alert('Nie uda\u0142o si\u0119 zapisa\u0107 dokumentu. Sprawd\u017A logi API.');\n  }\n}\n\nasync function deleteDocument(): Promise<void> {\n  if (!currentDocumentId) return;\n  if (!confirm('Na pewno usun\u0105\u0107 ten dokument?')) return;\n\n  try {\n    const resp = await fetch(`${API_URL}/commands/documents/delete`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ id: currentDocumentId }),\n    });\n    if (!resp.ok) throw new Error(`HTTP ${resp.status}`);\n    currentDocumentId = null;\n    clearDocumentEditor();\n    await loadDocuments();\n  } catch (err) {\n    console.error('Nie uda\u0142o si\u0119 usun\u0105\u0107 dokumentu:', err);\n    alert('Nie uda\u0142o si\u0119 usun\u0105\u0107 dokumentu.');\n  }\n}\n\nfunction escapeHtml(text: string): string {\n  return text\n    .replace(/&/g, '&amp;')\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;')\n    .replace(/\"/g, '&quot;')\n    .replace(/'/g, '&#039;');\n}\n\n", "const API_URL = '/api/v1';\n\ninterface ProjectDto {\n  id: number;\n  name: string;\n  description?: string | null;\n  contact?: string | null;\n}\n\ninterface ProjectFileDto {\n  id: number;\n  project_id?: number;\n  projectId?: number;\n  filename: string;\n  path?: string | null;\n}\n\ninterface ContextChannel {\n  id: string;\n  name: string;\n}\n\ninterface ContextChannelsResponse {\n  channels: ContextChannel[];\n}\n\nlet currentProjectId: number | null = null;\nlet currentFileId: number | null = null;\nlet currentContact: string | null = null;\n\nfunction getElements() {\n  return {\n    projectsList: document.getElementById('projects-list') as HTMLUListElement | null,\n    filesList: document.getElementById('files-list') as HTMLUListElement | null,\n  };\n}\n\nexport function initProjectsPanel(): void {\n  const els = getElements();\n  if (!els.projectsList || !els.filesList) return;\n\n  const contactItems = document.querySelectorAll<HTMLElement>('.contact-item');\n  contactItems.forEach((item) => {\n    item.addEventListener('click', () => {\n      contactItems.forEach((i) => i.classList.remove('active'));\n      item.classList.add('active');\n      currentContact = item.textContent?.trim() || null;\n      void loadProjects();\n    });\n  });\n\n  void loadProjects();\n}\n\nasync function loadProjects(): Promise<void> {\n  const els = getElements();\n  if (!els.projectsList) return;\n  try {\n    let url = `${API_URL}/projects?limit=50`;\n    if (currentContact) {\n      const encoded = encodeURIComponent(currentContact);\n      url = `${API_URL}/projects?contact=${encoded}&limit=50`;\n    }\n    const resp = await fetch(url);\n    if (!resp.ok) throw new Error(`HTTP ${resp.status}`);\n    const projects = (await resp.json()) as ProjectDto[];\n    renderProjects(projects || []);\n  } catch (err) {\n    console.error('Nie uda\u0142o si\u0119 pobra\u0107 projekt\u00F3w:', err);\n  }\n}\n\nfunction renderProjects(projects: ProjectDto[]): void {\n  const els = getElements();\n  if (!els.projectsList || !els.filesList) return;\n\n  els.projectsList.innerHTML = '';\n  currentProjectId = null;\n  currentFileId = null;\n  els.filesList.innerHTML = '';\n\n  projects.forEach((project) => {\n    const li = document.createElement('li');\n    li.className = 'project-item';\n    li.dataset.projectId = String(project.id);\n\n    const name = project.name || `Projekt ${project.id}`;\n    const icon = getProjectIcon(name);\n    li.innerHTML = `<span class=\"project-icon\">${icon}</span> ${escapeHtml(name)}`;\n\n    li.addEventListener('click', () => {\n      document.querySelectorAll('.project-item').forEach((i) => i.classList.remove('active'));\n      li.classList.add('active');\n      currentProjectId = project.id;\n      void loadProjectFiles(project.id);\n      void updateContextChannels();\n    });\n\n    els.projectsList!.appendChild(li);\n  });\n}\n\nasync function loadProjectFiles(projectId: number): Promise<void> {\n  const els = getElements();\n  if (!els.filesList) return;\n  try {\n    const resp = await fetch(`${API_URL}/projects/${projectId}/files`);\n    if (!resp.ok) throw new Error(`HTTP ${resp.status}`);\n    const files = (await resp.json()) as ProjectFileDto[];\n    renderFiles(files || []);\n  } catch (err) {\n    console.error('Nie uda\u0142o si\u0119 pobra\u0107 plik\u00F3w projektu:', err);\n  }\n}\n\nfunction renderFiles(files: ProjectFileDto[]): void {\n  const els = getElements();\n  if (!els.filesList) return;\n  els.filesList.innerHTML = '';\n  currentFileId = null;\n\n  files.forEach((file) => {\n    const li = document.createElement('li');\n    li.className = 'file-item';\n    li.dataset.fileId = String(file.id);\n    const icon = getFileIcon(file.filename || '');\n    li.innerHTML = `${icon} ${escapeHtml(file.filename || '')}`;\n\n    li.addEventListener('click', () => {\n      document.querySelectorAll('.file-item').forEach((i) => i.classList.remove('active'));\n      li.classList.add('active');\n      currentFileId = file.id;\n      void updateContextChannels();\n    });\n\n    els.filesList!.appendChild(li);\n  });\n}\n\nfunction getFileIcon(filename: string): string {\n  const ext = filename.split('.').pop()?.toLowerCase() || '';\n  const icons: Record<string, string> = {\n    pdf: '\uD83D\uDCD1',\n    doc: '\uD83D\uDCDD',\n    docx: '\uD83D\uDCDD',\n    xls: '\uD83D\uDCCA',\n    xlsx: '\uD83D\uDCCA',\n    txt: '\uD83D\uDCC4',\n    png: '\uD83D\uDDBC\uFE0F',\n    jpg: '\uD83D\uDDBC\uFE0F',\n    jpeg: '\uD83D\uDDBC\uFE0F',\n    gif: '\uD83D\uDDBC\uFE0F',\n    zip: '\uD83D\uDCE6',\n    rar: '\uD83D\uDCE6',\n  };\n  return icons[ext] || '\uD83D\uDCC4';\n}\n\nfunction getProjectIcon(name: string): string {\n  const lower = (name || '').toLowerCase();\n  if (lower.includes('ksef') || lower.includes('faktur')) return '\uD83D\uDCCB';\n  if (lower.includes('b2b') || lower.includes('umowa') || lower.includes('kontrakt')) return '\uD83D\uDCBC';\n  if (lower.includes('zus') || lower.includes('sk\u0142adk')) return '\uD83C\uDFE5';\n  if (lower.includes('vat') || lower.includes('jpk')) return '\uD83D\uDCB0';\n  return '\uD83D\uDCC1';\n}\n\nasync function updateContextChannels(): Promise<void> {\n  try {\n    const params = new URLSearchParams();\n    if (currentContact) params.append('contact', currentContact);\n    if (currentProjectId != null) params.append('project_id', String(currentProjectId));\n    if (currentFileId != null) params.append('file_id', String(currentFileId));\n\n    if (![...params.keys()].length) {\n      resetContextChannels();\n      return;\n    }\n\n    const resp = await fetch(`${API_URL}/context/channels?${params.toString()}`);\n    if (!resp.ok) throw new Error(`HTTP ${resp.status}`);\n    const data = (await resp.json()) as ContextChannelsResponse;\n\n    const channels = data.channels || [];\n    if (channels.length === 0) {\n      resetContextChannels();\n      return;\n    }\n\n    const first = channels[0];\n    if (first?.id && window.setModule) {\n      window.setModule(first.id as any);\n    }\n\n    const recommendedIds = new Set(channels.map((c) => c.id));\n    document.querySelectorAll<HTMLElement>('.channel-item').forEach((item) => {\n      const mod = item.dataset.module;\n      if (!mod) return;\n      item.classList.toggle('recommended', recommendedIds.has(mod));\n    });\n  } catch (err) {\n    console.error('Nie uda\u0142o si\u0119 pobra\u0107 kana\u0142\u00F3w kontekstowych:', err);\n    resetContextChannels();\n  }\n}\n\nfunction resetContextChannels(): void {\n  if (window.setModule) {\n    window.setModule('default' as any);\n  }\n  document.querySelectorAll<HTMLElement>('.channel-item').forEach((item) => {\n    const mod = item.dataset.module;\n    if (!mod) return;\n    item.classList.remove('recommended');\n    item.classList.toggle('active', mod === 'default');\n  });\n}\n\nfunction escapeHtml(text: string): string {\n  return text\n    .replace(/&/g, '&amp;')\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;')\n    .replace(/\"/g, '&quot;')\n    .replace(/'/g, '&#039;');\n}\n\n", "const API_URL = '/api/v1';\n\nlet isEditMode = false;\nlet draggedModule: HTMLElement | null = null;\n\nfunction getElements() {\n  return {\n    panelLeft: document.getElementById('panel-left') as HTMLElement | null,\n    panelRight: document.getElementById('panel-right') as HTMLElement | null,\n    editToggle: document.getElementById('edit-dashboard-toggle') as HTMLElement | null,\n  };\n}\n\ninterface LayoutModuleConfig {\n  id: string;\n  column: 'left' | 'right';\n  order: number;\n}\n\nexport async function initDashboardLayout(): Promise<void> {\n  // Tymczasowo pusta implementacja - logika w modules/frontend/js/app.js\n  // Docelowo przeniesiemy tu funkcje initDashboardLayout, initDragAndDrop, saveCurrentLayout, itd.\n\n  const modules = document.querySelectorAll<HTMLElement>('.dashboard-module');\n  modules.forEach((el) => {\n    // Drag tylko w trybie edycji \u2013 domy\u015Blnie wy\u0142\u0105czony\n    el.classList.add('no-drag');\n  });\n\n  try {\n    const response = await fetch(`${API_URL}/layout`);\n    if (response.ok) {\n      const data = (await response.json()) as { modules?: LayoutModuleConfig[] };\n      if (data && Array.isArray(data.modules)) {\n        applyLayoutFromConfig(data.modules);\n      }\n    }\n  } catch (error) {\n    console.error('Nie uda\u0142o si\u0119 pobra\u0107 uk\u0142adu dashboardu:', error);\n  }\n\n  initDragAndDrop();\n  initEditToggle();\n}\n\nfunction applyLayoutFromConfig(configModules: LayoutModuleConfig[]): void {\n  const allModules: Record<string, HTMLElement> = {};\n  document.querySelectorAll<HTMLElement>('.dashboard-module').forEach((el) => {\n    const id = el.dataset.moduleId;\n    if (id) {\n      allModules[id] = el;\n    }\n  });\n\n  const { panelLeft, panelRight } = getElements();\n  if (!panelLeft || !panelRight) return;\n\n  panelLeft.innerHTML = '';\n  panelRight.innerHTML = '';\n\n  const byColumn: Record<'left' | 'right', HTMLElement> = {\n    left: panelLeft,\n    right: panelRight,\n  };\n\n  configModules\n    .slice()\n    .sort((a, b) => (a.order || 0) - (b.order || 0))\n    .forEach((cfg) => {\n      const el = allModules[cfg.id];\n      const panel = byColumn[cfg.column] || panelLeft;\n      if (el && panel) {\n        panel.appendChild(el);\n      }\n    });\n\n  Object.keys(allModules).forEach((id) => {\n    const el = allModules[id];\n    if (el && !el.parentElement) {\n      panelLeft.appendChild(el);\n    }\n  });\n}\n\nfunction initDragAndDrop(): void {\n  const modules = document.querySelectorAll<HTMLElement>('.dashboard-module');\n  modules.forEach((el) => {\n    el.addEventListener('dragstart', onModuleDragStart);\n    el.addEventListener('dragend', onModuleDragEnd);\n  });\n\n  const { panelLeft, panelRight } = getElements();\n  [panelLeft, panelRight].forEach((panel) => {\n    if (!panel) return;\n    panel.addEventListener('dragover', onPanelDragOver);\n    panel.addEventListener('drop', onPanelDrop);\n  });\n}\n\nfunction onModuleDragStart(event: DragEvent): void {\n  if (!isEditMode) {\n    event.preventDefault();\n    return;\n  }\n  const target = event.currentTarget as HTMLElement | null;\n  if (!target) return;\n  draggedModule = target;\n  if (event.dataTransfer) {\n    event.dataTransfer.effectAllowed = 'move';\n  }\n  draggedModule.classList.add('dragging');\n}\n\nfunction onModuleDragEnd(): void {\n  if (draggedModule) {\n    draggedModule.classList.remove('dragging');\n    draggedModule = null;\n  }\n}\n\nfunction onPanelDragOver(event: DragEvent): void {\n  if (!isEditMode) return;\n  event.preventDefault();\n}\n\nfunction onPanelDrop(event: DragEvent): void {\n  if (!isEditMode) return;\n  event.preventDefault();\n  if (!draggedModule) return;\n\n  const panel = event.currentTarget as HTMLElement | null;\n  if (!panel) return;\n\n  const targetElement = (event.target as HTMLElement | null)?.closest('.dashboard-module') as\n    | HTMLElement\n    | null;\n\n  if (targetElement && targetElement !== draggedModule && targetElement.parentElement === panel) {\n    panel.insertBefore(draggedModule, targetElement);\n  } else {\n    panel.appendChild(draggedModule);\n  }\n\n  draggedModule.classList.remove('dragging');\n  draggedModule = null;\n  saveCurrentLayout();\n}\n\nfunction saveCurrentLayout(): void {\n  const { panelLeft, panelRight } = getElements();\n  if (!panelLeft || !panelRight) return;\n\n  const config: { modules: LayoutModuleConfig[] } = { modules: [] };\n\n  const columns: Array<['left' | 'right', HTMLElement]> = [\n    ['left', panelLeft],\n    ['right', panelRight],\n  ];\n\n  columns.forEach(([column, panel]) => {\n    const mods = panel.querySelectorAll<HTMLElement>('.dashboard-module');\n    mods.forEach((el, index) => {\n      const id = el.dataset.moduleId;\n      if (!id) return;\n      config.modules.push({\n        id,\n        column,\n        order: index,\n      });\n    });\n  });\n\n  fetch(`${API_URL}/layout`, {\n    method: 'POST',\n    headers: { 'Content-Type': 'application/json' },\n    body: JSON.stringify(config),\n  }).catch((err) => {\n    console.error('Nie uda\u0142o si\u0119 zapisa\u0107 uk\u0142adu dashboardu:', err);\n  });\n}\n\nfunction initEditToggle(): void {\n  const { editToggle } = getElements();\n  if (!editToggle) return;\n\n  editToggle.addEventListener('click', () => {\n    isEditMode = !isEditMode;\n    editToggle.classList.toggle('active', isEditMode);\n    editToggle.setAttribute('aria-pressed', String(isEditMode));\n\n    document.body.classList.toggle('dashboard-edit', isEditMode);\n\n    const modules = document.querySelectorAll<HTMLElement>('.dashboard-module');\n    modules.forEach((el) => {\n      if (isEditMode) {\n        el.classList.remove('no-drag');\n        el.setAttribute('draggable', 'true');\n      } else {\n        el.classList.add('no-drag');\n        el.removeAttribute('draggable');\n      }\n    });\n  });\n}\n\n", "/**\n * Base Component Class - Bazowa klasa dla komponent\u00F3w UI\n */\nexport interface ComponentConfig {\n  container: string | HTMLElement;\n  template?: string;\n}\n\nexport abstract class Component<T extends ComponentConfig = ComponentConfig> {\n  protected container: HTMLElement | null;\n  protected config: T;\n  protected mounted = false;\n\n  constructor(config: T) {\n    this.config = config;\n    this.container = typeof config.container === 'string'\n      ? document.querySelector(config.container)\n      : config.container;\n  }\n\n  abstract render(): string;\n\n  mount(): void {\n    if (!this.container) {\n      console.warn(`Container not found for component`);\n      return;\n    }\n    \n    this.container.innerHTML = this.render();\n    this.mounted = true;\n    this.afterMount();\n    this.bindEvents();\n  }\n\n  protected afterMount(): void {}\n  protected bindEvents(): void {}\n\n  protected $(selector: string): HTMLElement | null {\n    return this.container?.querySelector(selector) || null;\n  }\n\n  protected $$(selector: string): NodeListOf<HTMLElement> {\n    return this.container?.querySelectorAll(selector) || document.querySelectorAll('__none__');\n  }\n\n  destroy(): void {\n    if (this.container) {\n      this.container.innerHTML = '';\n    }\n    this.mounted = false;\n  }\n}\n\n/**\n * Event Bus - Komunikacja mi\u0119dzy komponentami\n */\ntype EventCallback = (...args: any[]) => void;\n\nclass EventBusClass {\n  private events: Map<string, EventCallback[]> = new Map();\n\n  on(event: string, callback: EventCallback): void {\n    if (!this.events.has(event)) {\n      this.events.set(event, []);\n    }\n    this.events.get(event)!.push(callback);\n  }\n\n  off(event: string, callback: EventCallback): void {\n    const callbacks = this.events.get(event);\n    if (callbacks) {\n      const index = callbacks.indexOf(callback);\n      if (index > -1) callbacks.splice(index, 1);\n    }\n  }\n\n  emit(event: string, ...args: any[]): void {\n    const callbacks = this.events.get(event);\n    if (callbacks) {\n      callbacks.forEach(cb => cb(...args));\n    }\n  }\n}\n\nexport const EventBus = new EventBusClass();\n\n/**\n * API Client - Singleton dla komunikacji z backendem\n */\nexport class ApiClient {\n  private static instance: ApiClient;\n  private baseUrl: string;\n\n  private constructor(baseUrl: string = '/api/v1') {\n    this.baseUrl = baseUrl;\n  }\n\n  static getInstance(): ApiClient {\n    if (!ApiClient.instance) {\n      ApiClient.instance = new ApiClient();\n    }\n    return ApiClient.instance;\n  }\n\n  async get<T>(endpoint: string): Promise<T> {\n    const response = await fetch(`${this.baseUrl}${endpoint}`);\n    if (!response.ok) throw new Error(`HTTP ${response.status}`);\n    return response.json();\n  }\n\n  async post<T>(endpoint: string, data: unknown): Promise<T> {\n    const response = await fetch(`${this.baseUrl}${endpoint}`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(data),\n    });\n    if (!response.ok) throw new Error(`HTTP ${response.status}`);\n    return response.json();\n  }\n\n  async delete<T>(endpoint: string): Promise<T> {\n    const response = await fetch(`${this.baseUrl}${endpoint}`, {\n      method: 'DELETE',\n    });\n    if (!response.ok) throw new Error(`HTTP ${response.status}`);\n    return response.json();\n  }\n\n  getBaseUrl(): string {\n    return this.baseUrl.replace('/api/v1', '');\n  }\n}\n\nexport const api = ApiClient.getInstance();\n", "/**\n * Header Component - Nag\u0142\u00F3wek aplikacji z logo i statusem\n */\nimport { Component, ComponentConfig, api } from '../core/Component';\n\ninterface HealthResponse {\n  status: 'healthy' | 'degraded' | 'unhealthy';\n  services: Record<string, string>;\n}\n\nexport class Header extends Component {\n  private status: 'checking' | 'healthy' | 'degraded' | 'unhealthy' = 'checking';\n  private statusMessage = 'Sprawdzam po\u0142\u0105czenie...';\n\n  render(): string {\n    return `\n      <header class=\"header\">\n        <div class=\"logo\">\n          <h1 class=\"detax-logo\">\n            <span class=\"de\">de</span><span class=\"tax\">tax</span>\n          </h1>\n        </div>\n        <p class=\"tagline\">Odetchnij od podatk\u00F3w</p>\n        <div class=\"status ${this.status}\" id=\"app-status\">\n          <span class=\"status-dot\"></span>\n          <span class=\"status-text\">${this.statusMessage}</span>\n        </div>\n      </header>\n    `;\n  }\n\n  protected async afterMount(): Promise<void> {\n    await this.checkHealth();\n  }\n\n  private async checkHealth(): Promise<void> {\n    try {\n      const baseUrl = api.getBaseUrl();\n      const response = await fetch(`${baseUrl}/health`);\n      const data: HealthResponse = await response.json();\n\n      this.status = data.status;\n      \n      if (data.status === 'healthy') {\n        this.statusMessage = 'Po\u0142\u0105czono z Bielikiem';\n      } else if (data.status === 'degraded') {\n        this.statusMessage = data.services?.model === 'not_loaded' \n          ? '\u0141adowanie modelu...' \n          : 'Cz\u0119\u015Bciowo dost\u0119pny';\n      } else {\n        this.statusMessage = 'B\u0142\u0105d po\u0142\u0105czenia';\n      }\n    } catch (e) {\n      this.status = 'unhealthy';\n      this.statusMessage = 'Brak po\u0142\u0105czenia';\n    }\n\n    this.updateStatus();\n    \n    // Check again in 30s\n    setTimeout(() => this.checkHealth(), 30000);\n  }\n\n  private updateStatus(): void {\n    const statusEl = this.$('#app-status');\n    const statusText = this.$('.status-text');\n    \n    if (statusEl) {\n      statusEl.className = `status ${this.status}`;\n    }\n    if (statusText) {\n      statusText.textContent = this.statusMessage;\n    }\n  }\n}\n", "/**\n * ChatPanel Component - Panel czatu z Bielikiem\n */\nimport { Component, ComponentConfig, api, EventBus } from '../core/Component';\n\ntype ModuleId = 'default' | 'ksef' | 'b2b' | 'zus' | 'vat';\n\ninterface ChatSource {\n  title: string;\n  source: string | null;\n  similarity: number;\n}\n\ninterface ChatResponse {\n  response: string;\n  sources?: ChatSource[];\n  module: string;\n  conversation_id: string;\n}\n\nconst MODULES: Record<ModuleId, { name: string; icon: string; hint: string }> = {\n  default: { \n    name: 'Og\u00F3lne', \n    icon: '\uD83D\uDCAC',\n    hint: 'Zadaj dowolne pytanie dotycz\u0105ce prowadzenia firmy w Polsce.'\n  },\n  ksef: { \n    name: 'KSeF', \n    icon: '\uD83D\uDCC4',\n    hint: 'Pytaj o Krajowy System e-Faktur: terminy wdro\u017Cenia, wymagania techniczne, procedury.'\n  },\n  b2b: { \n    name: 'B2B', \n    icon: '\uD83D\uDCBC',\n    hint: 'Pomog\u0119 oceni\u0107 ryzyko Twojej umowy B2B wed\u0142ug kryteri\u00F3w Inspekcji Pracy.'\n  },\n  zus: { \n    name: 'ZUS', \n    icon: '\uD83C\uDFE5',\n    hint: 'Oblicz\u0119 sk\u0142adki ZUS i wyja\u015Bni\u0119 zasady ubezpiecze\u0144 dla przedsi\u0119biorc\u00F3w.'\n  },\n  vat: { \n    name: 'VAT', \n    icon: '\uD83D\uDCB0',\n    hint: 'Pomog\u0119 z JPK_VAT, VAT OSS i innymi rozliczeniami podatkowymi.'\n  },\n};\n\nconst QUICK_QUESTIONS = [\n  { question: 'Kiedy KSeF b\u0119dzie obowi\u0105zkowy?', module: 'ksef' as ModuleId, label: 'KSeF' },\n  { question: 'Jak oceni\u0107 czy moja umowa B2B jest bezpieczna?', module: 'b2b' as ModuleId, label: 'B2B' },\n  { question: 'Ile wynosi sk\u0142adka zdrowotna na rycza\u0142cie w 2025?', module: 'zus' as ModuleId, label: 'ZUS' },\n  { question: 'Co to jest VAT OSS i kiedy go stosowa\u0107?', module: 'vat' as ModuleId, label: 'VAT' },\n];\n\nexport class ChatPanel extends Component {\n  private currentModule: ModuleId = 'default';\n  private isLoading = false;\n  private lastSources: ChatSource[] = [];\n  private showQuickQuestions = true;\n\n  render(): string {\n    return `\n      <div class=\"chat-panel-component\">\n        <div class=\"chat-channels\">\n          <h4>\uD83D\uDCE2 Kana\u0142y</h4>\n          <ul class=\"channels-list\">\n            ${Object.entries(MODULES).map(([id, mod]) => `\n              <li class=\"channel-item ${id === this.currentModule ? 'active' : ''}\" \n                  data-module=\"${id}\">\n                <span class=\"channel-icon\">${mod.icon}</span>\n                <span class=\"channel-name\"># ${mod.name.toLowerCase()}</span>\n              </li>\n            `).join('')}\n          </ul>\n        </div>\n\n        <main class=\"chat-container\">\n          <div id=\"chat-messages\" class=\"messages\">\n            ${this.renderWelcomeMessage()}\n          </div>\n\n          <div class=\"quick-questions ${this.showQuickQuestions ? '' : 'hidden'}\" id=\"quick-questions\">\n            <span class=\"quick-label\">Szybkie pytania:</span>\n            <div class=\"quick-btns\">\n              ${QUICK_QUESTIONS.map(q => `\n                <button class=\"quick-btn\" data-question=\"${q.question}\" data-module=\"${q.module}\">\n                  ${q.label}\n                </button>\n              `).join('')}\n            </div>\n          </div>\n\n          <form id=\"chat-form\" class=\"input-area\">\n            <div class=\"input-wrapper\">\n              <input \n                type=\"text\" \n                id=\"chat-input\" \n                placeholder=\"Zadaj pytanie...\" \n                autocomplete=\"off\"\n                maxlength=\"2000\"\n              >\n              <button type=\"submit\" id=\"send-btn\" ${this.isLoading ? 'disabled' : ''}>\n                <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n                  <line x1=\"22\" y1=\"2\" x2=\"11\" y2=\"13\"></line>\n                  <polygon points=\"22 2 15 22 11 13 2 9 22 2\"></polygon>\n                </svg>\n              </button>\n            </div>\n            <div class=\"input-hints\">\n              <span class=\"current-module\" id=\"current-module\">Modu\u0142: ${MODULES[this.currentModule].name}</span>\n              <span class=\"char-count\" id=\"char-count\">0/2000</span>\n            </div>\n          </form>\n        </main>\n\n        <aside id=\"sources-panel\" class=\"sources-panel hidden\">\n          <div class=\"sources-header\">\n            <h3>\uD83D\uDCDA \u0179r\u00F3d\u0142a</h3>\n            <button class=\"close-btn\" id=\"close-sources\">\u00D7</button>\n          </div>\n          <ul id=\"sources-list\" class=\"sources-list\"></ul>\n        </aside>\n      </div>\n    `;\n  }\n\n  private renderWelcomeMessage(): string {\n    return `\n      <div class=\"message assistant\">\n        <div class=\"message-avatar\">\uD83E\uDD85</div>\n        <div class=\"message-content\">\n          <p>Cze\u015B\u0107! Jestem <strong>Bielikiem</strong> - polskim asystentem AI dla przedsi\u0119biorc\u00F3w.</p>\n          <p>Mog\u0119 pom\u00F3c Ci z:</p>\n          <ul>\n            <li><strong>KSeF</strong> - terminy, wymagania, procedury e-faktur</li>\n            <li><strong>B2B</strong> - ryzyko przekwalifikowania umowy na etat</li>\n            <li><strong>ZUS</strong> - sk\u0142adki, ubezpieczenia, obliczenia</li>\n            <li><strong>VAT</strong> - JPK, VAT OSS, rozliczenia</li>\n          </ul>\n          <p>Wybierz kana\u0142 po lewej i zadaj pytanie!</p>\n        </div>\n      </div>\n    `;\n  }\n\n  protected afterMount(): void {\n    // Listen for channel selection from ContextPanel\n    EventBus.on('channel:selected', (channelId: string) => {\n      if (channelId in MODULES) {\n        this.setModule(channelId as ModuleId);\n      }\n    });\n  }\n\n  protected bindEvents(): void {\n    // Channel selection\n    this.$$('.channel-item').forEach(item => {\n      item.addEventListener('click', () => {\n        const moduleId = item.dataset.module as ModuleId;\n        if (moduleId) this.setModule(moduleId);\n      });\n    });\n\n    // Form submission\n    const form = this.$('#chat-form') as HTMLFormElement;\n    const input = this.$('#chat-input') as HTMLInputElement;\n    const charCount = this.$('#char-count');\n\n    form?.addEventListener('submit', async (e) => {\n      e.preventDefault();\n      const message = input?.value.trim();\n      if (message && !this.isLoading) {\n        await this.sendMessage(message);\n      }\n    });\n\n    input?.addEventListener('input', () => {\n      if (charCount) {\n        charCount.textContent = `${input.value.length}/2000`;\n      }\n    });\n\n    input?.addEventListener('keydown', (e) => {\n      if (e.key === 'Enter' && !e.shiftKey) {\n        e.preventDefault();\n        form?.dispatchEvent(new Event('submit'));\n      }\n    });\n\n    // Quick questions\n    this.$$('.quick-btn').forEach(btn => {\n      btn.addEventListener('click', () => {\n        const question = btn.dataset.question;\n        const moduleId = btn.dataset.module as ModuleId;\n        \n        if (moduleId && moduleId !== this.currentModule) {\n          this.setModule(moduleId);\n        }\n        \n        if (question && input) {\n          input.value = question;\n          form?.dispatchEvent(new Event('submit'));\n        }\n      });\n    });\n\n    // Sources panel\n    const closeBtn = this.$('#close-sources');\n    closeBtn?.addEventListener('click', () => this.hideSources());\n\n    // Focus input\n    input?.focus();\n  }\n\n  private setModule(module: ModuleId): void {\n    this.currentModule = module;\n\n    // Update channel list\n    this.$$('.channel-item').forEach(item => {\n      item.classList.toggle('active', item.dataset.module === module);\n    });\n\n    // Update module indicator\n    const moduleIndicator = this.$('#current-module');\n    if (moduleIndicator) {\n      moduleIndicator.textContent = `Modu\u0142: ${MODULES[module].name}`;\n    }\n\n    // Add hint message\n    this.addMessage(MODULES[module].hint, 'assistant');\n    \n    (this.$('#chat-input') as HTMLInputElement)?.focus();\n  }\n\n  private async sendMessage(message: string): Promise<void> {\n    this.isLoading = true;\n    this.setLoadingState(true);\n\n    // Hide quick questions\n    const quickEl = this.$('#quick-questions');\n    if (quickEl) quickEl.classList.add('hidden');\n    this.showQuickQuestions = false;\n\n    // Add user message\n    this.addMessage(message, 'user');\n\n    // Clear input\n    const input = this.$('#chat-input') as HTMLInputElement;\n    const charCount = this.$('#char-count');\n    if (input) input.value = '';\n    if (charCount) charCount.textContent = '0/2000';\n\n    // Add loading message\n    const loadingId = this.addMessage('', 'assistant', true);\n\n    try {\n      const data = await api.post<ChatResponse>('/chat', {\n        message,\n        module: this.currentModule,\n      });\n\n      this.removeMessage(loadingId);\n      this.addMessage(data.response, 'assistant', false, data.sources);\n      this.lastSources = data.sources || [];\n    } catch (e) {\n      console.error('Chat error:', e);\n      this.removeMessage(loadingId);\n      this.addMessage(\n        'Przepraszam, wyst\u0105pi\u0142 b\u0142\u0105d po\u0142\u0105czenia. Sprawd\u017A czy serwisy dzia\u0142aj\u0105 i spr\u00F3buj ponownie.',\n        'assistant'\n      );\n    } finally {\n      this.isLoading = false;\n      this.setLoadingState(false);\n      input?.focus();\n    }\n  }\n\n  private addMessage(\n    text: string, \n    role: 'user' | 'assistant', \n    isLoading = false,\n    sources?: ChatSource[]\n  ): string {\n    const id = `msg-${Date.now()}-${Math.random().toString(36).slice(2)}`;\n    const messagesEl = this.$('#chat-messages');\n    if (!messagesEl) return id;\n\n    const avatar = role === 'user' ? '\uD83D\uDC64' : '\uD83E\uDD85';\n    let contentHtml = this.formatMessage(text);\n\n    if (sources && sources.length > 0) {\n      contentHtml += `\n        <div class=\"sources-link\" data-action=\"show-sources\">\n          \uD83D\uDCDA Zobacz \u017Ar\u00F3d\u0142a (${sources.length})\n        </div>\n      `;\n    }\n\n    const messageDiv = document.createElement('div');\n    messageDiv.id = id;\n    messageDiv.className = `message ${role}${isLoading ? ' loading' : ''}`;\n    messageDiv.innerHTML = `\n      <div class=\"message-avatar\">${avatar}</div>\n      <div class=\"message-content\">${contentHtml}</div>\n    `;\n\n    // Bind sources link\n    const sourcesLink = messageDiv.querySelector('[data-action=\"show-sources\"]');\n    sourcesLink?.addEventListener('click', () => this.showSources());\n\n    messagesEl.appendChild(messageDiv);\n    messagesEl.scrollTop = messagesEl.scrollHeight;\n\n    return id;\n  }\n\n  private removeMessage(id: string): void {\n    document.getElementById(id)?.remove();\n  }\n\n  private formatMessage(text: string): string {\n    if (!text) return '<div class=\"typing-indicator\"><span></span><span></span><span></span></div>';\n\n    let safe = text\n      .replace(/&/g, '&amp;')\n      .replace(/</g, '&lt;')\n      .replace(/>/g, '&gt;');\n\n    safe = safe.replace(/\\*\\*(.+?)\\*\\*/g, '<strong>$1</strong>');\n    safe = safe.replace(/```([\\s\\S]*?)```/g, '<pre><code>$1</code></pre>');\n    safe = safe.replace(/`(.+?)`/g, '<code>$1</code>');\n    safe = safe.replace(/\\n\\n/g, '</p><p>');\n    safe = safe.replace(/\\n/g, '<br>');\n\n    if (!safe.startsWith('<p>') && !safe.startsWith('<div')) {\n      safe = `<p>${safe}</p>`;\n    }\n\n    return safe;\n  }\n\n  private setLoadingState(loading: boolean): void {\n    const sendBtn = this.$('#send-btn') as HTMLButtonElement;\n    const input = this.$('#chat-input') as HTMLInputElement;\n    \n    if (sendBtn) sendBtn.disabled = loading;\n    if (input) input.disabled = loading;\n  }\n\n  private showSources(): void {\n    const panel = this.$('#sources-panel');\n    const list = this.$('#sources-list');\n    \n    if (!panel || !list || !this.lastSources.length) return;\n\n    list.innerHTML = this.lastSources.map(source => `\n      <li>\n        <div class=\"source-title\">${this.escapeHtml(source.title)}</div>\n        <div class=\"source-meta\">\n          ${source.source ? this.escapeHtml(source.source) : 'Brak \u017Ar\u00F3d\u0142a'}\n          <span class=\"source-similarity\">${Math.round(source.similarity * 100)}%</span>\n        </div>\n      </li>\n    `).join('');\n\n    panel.classList.remove('hidden');\n    panel.classList.add('visible');\n  }\n\n  private hideSources(): void {\n    const panel = this.$('#sources-panel');\n    if (!panel) return;\n    \n    panel.classList.remove('visible');\n    setTimeout(() => panel.classList.add('hidden'), 300);\n  }\n\n  private escapeHtml(text: string): string {\n    return text\n      .replace(/&/g, '&amp;')\n      .replace(/</g, '&lt;')\n      .replace(/>/g, '&gt;');\n  }\n}\n", "/**\n * ContextPanel Component - Hierarchia kontekstu: Kontakty \u2192 Projekty \u2192 Pliki \u2192 Kana\u0142y\n */\nimport { Component, ComponentConfig, api, EventBus } from '../core/Component';\n\ninterface Contact {\n  name: string;\n  projects: Project[];\n}\n\ninterface Project {\n  id: number;\n  name: string;\n  description: string;\n  files: ProjectFile[];\n}\n\ninterface ProjectFile {\n  id: number;\n  filename: string;\n  path: string;\n}\n\ninterface Channel {\n  id: string;\n  name: string;\n}\n\ninterface ContextState {\n  selectedContact: string | null;\n  selectedProject: Project | null;\n  selectedFile: ProjectFile | null;\n  recommendedChannels: Channel[];\n}\n\nexport class ContextPanel extends Component {\n  private contacts: Contact[] = [];\n  private state: ContextState = {\n    selectedContact: null,\n    selectedProject: null,\n    selectedFile: null,\n    recommendedChannels: [],\n  };\n\n  render(): string {\n    return `\n      <div class=\"context-panel\">\n        <div class=\"context-section contacts-section\">\n          <h3>\uD83D\uDC65 Kontakty</h3>\n          <ul class=\"contacts-list\" id=\"context-contacts\">\n            ${this.renderContacts()}\n          </ul>\n        </div>\n\n        <div class=\"context-section projects-section\">\n          <h3>\uD83D\uDCC1 Projekty</h3>\n          <ul class=\"projects-list\" id=\"context-projects\">\n            ${this.renderProjects()}\n          </ul>\n        </div>\n\n        <div class=\"context-section files-section\">\n          <h3>\uD83D\uDCC4 Pliki</h3>\n          <ul class=\"files-list\" id=\"context-files\">\n            ${this.renderFiles()}\n          </ul>\n        </div>\n\n        <div class=\"context-section channels-section\">\n          <h3>\uD83D\uDCE2 Rekomendowane kana\u0142y</h3>\n          <ul class=\"channels-list\" id=\"context-channels\">\n            ${this.renderChannels()}\n          </ul>\n        </div>\n\n        <div class=\"context-summary\" id=\"context-summary\">\n          ${this.renderSummary()}\n        </div>\n      </div>\n    `;\n  }\n\n  private renderContacts(): string {\n    if (!this.contacts.length) {\n      return '<li class=\"empty\">\u0141adowanie...</li>';\n    }\n\n    return this.contacts.map(contact => `\n      <li class=\"contact-item ${this.state.selectedContact === contact.name ? 'active' : ''}\" \n          data-contact=\"${this.escapeHtml(contact.name)}\">\n        <span class=\"contact-icon\">\uD83D\uDC64</span>\n        <span class=\"contact-name\">${this.escapeHtml(contact.name)}</span>\n        <span class=\"contact-count\">${contact.projects.length}</span>\n      </li>\n    `).join('');\n  }\n\n  private renderProjects(): string {\n    if (!this.state.selectedContact) {\n      return '<li class=\"empty\">Wybierz kontakt</li>';\n    }\n\n    const contact = this.contacts.find(c => c.name === this.state.selectedContact);\n    if (!contact || !contact.projects.length) {\n      return '<li class=\"empty\">Brak projekt\u00F3w</li>';\n    }\n\n    return contact.projects.map(project => `\n      <li class=\"project-item ${this.state.selectedProject?.id === project.id ? 'active' : ''}\"\n          data-project-id=\"${project.id}\">\n        <span class=\"project-icon\">\uD83D\uDCCB</span>\n        <div class=\"project-info\">\n          <span class=\"project-name\">${this.escapeHtml(project.name)}</span>\n          <span class=\"project-desc\">${this.escapeHtml(project.description || '')}</span>\n        </div>\n        <span class=\"project-files-count\">${project.files.length} plik\u00F3w</span>\n      </li>\n    `).join('');\n  }\n\n  private renderFiles(): string {\n    if (!this.state.selectedProject) {\n      return '<li class=\"empty\">Wybierz projekt</li>';\n    }\n\n    if (!this.state.selectedProject.files.length) {\n      return '<li class=\"empty\">Brak plik\u00F3w</li>';\n    }\n\n    return this.state.selectedProject.files.map(file => `\n      <li class=\"file-item ${this.state.selectedFile?.id === file.id ? 'active' : ''}\"\n          data-file-id=\"${file.id}\">\n        <span class=\"file-icon\">${this.getFileIcon(file.filename)}</span>\n        <span class=\"file-name\">${this.escapeHtml(file.filename)}</span>\n      </li>\n    `).join('');\n  }\n\n  private renderChannels(): string {\n    if (!this.state.recommendedChannels.length) {\n      return '<li class=\"empty\">Wybierz kontekst, aby zobaczy\u0107 kana\u0142y</li>';\n    }\n\n    return this.state.recommendedChannels.map(channel => `\n      <li class=\"channel-item\" data-channel=\"${channel.id}\">\n        <span class=\"channel-hash\">#</span>\n        <span class=\"channel-name\">${this.escapeHtml(channel.name)}</span>\n      </li>\n    `).join('');\n  }\n\n  private renderSummary(): string {\n    const parts: string[] = [];\n    \n    if (this.state.selectedContact) {\n      parts.push(`\uD83D\uDC64 ${this.state.selectedContact}`);\n    }\n    if (this.state.selectedProject) {\n      parts.push(`\uD83D\uDCC1 ${this.state.selectedProject.name}`);\n    }\n    if (this.state.selectedFile) {\n      parts.push(`\uD83D\uDCC4 ${this.state.selectedFile.filename}`);\n    }\n\n    if (!parts.length) {\n      return '<span class=\"summary-empty\">Wybierz kontekst do rozmowy z Bielikiem</span>';\n    }\n\n    return `\n      <div class=\"summary-path\">${parts.join(' \u2192 ')}</div>\n      <button class=\"clear-context-btn\" id=\"clear-context\">Wyczy\u015B\u0107</button>\n    `;\n  }\n\n  private getFileIcon(filename: string): string {\n    const ext = filename.split('.').pop()?.toLowerCase();\n    const icons: Record<string, string> = {\n      pdf: '\uD83D\uDCD5',\n      doc: '\uD83D\uDCD8',\n      docx: '\uD83D\uDCD8',\n      xls: '\uD83D\uDCD7',\n      xlsx: '\uD83D\uDCD7',\n      txt: '\uD83D\uDCC4',\n      jpg: '\uD83D\uDDBC\uFE0F',\n      png: '\uD83D\uDDBC\uFE0F',\n    };\n    return icons[ext || ''] || '\uD83D\uDCC4';\n  }\n\n  protected async afterMount(): Promise<void> {\n    await this.loadHierarchy();\n  }\n\n  private async loadHierarchy(): Promise<void> {\n    try {\n      const data = await api.get<{ contacts: Contact[] }>('/context/hierarchy');\n      this.contacts = data.contacts;\n      this.updateUI();\n    } catch (e) {\n      console.error('Error loading context hierarchy:', e);\n    }\n  }\n\n  private async loadChannels(): Promise<void> {\n    try {\n      const params = new URLSearchParams();\n      if (this.state.selectedContact) {\n        params.set('contact', this.state.selectedContact);\n      }\n      if (this.state.selectedProject) {\n        params.set('project_id', String(this.state.selectedProject.id));\n      }\n      if (this.state.selectedFile) {\n        params.set('file_id', String(this.state.selectedFile.id));\n      }\n\n      const data = await api.get<{ channels: Channel[] }>(`/context/channels?${params}`);\n      this.state.recommendedChannels = data.channels;\n      this.updateChannelsUI();\n      \n      // Emit context change event\n      EventBus.emit('context:changed', this.state);\n    } catch (e) {\n      console.error('Error loading channels:', e);\n    }\n  }\n\n  private updateUI(): void {\n    const contactsList = this.$('#context-contacts');\n    const projectsList = this.$('#context-projects');\n    const filesList = this.$('#context-files');\n    const summary = this.$('#context-summary');\n\n    if (contactsList) contactsList.innerHTML = this.renderContacts();\n    if (projectsList) projectsList.innerHTML = this.renderProjects();\n    if (filesList) filesList.innerHTML = this.renderFiles();\n    if (summary) summary.innerHTML = this.renderSummary();\n\n    this.rebindEvents();\n  }\n\n  private updateChannelsUI(): void {\n    const channelsList = this.$('#context-channels');\n    if (channelsList) channelsList.innerHTML = this.renderChannels();\n    this.bindChannelEvents();\n  }\n\n  protected bindEvents(): void {\n    this.rebindEvents();\n  }\n\n  private rebindEvents(): void {\n    // Contacts\n    this.$$('#context-contacts .contact-item').forEach(item => {\n      item.addEventListener('click', () => {\n        const contact = item.dataset.contact;\n        if (contact) this.selectContact(contact);\n      });\n    });\n\n    // Projects\n    this.$$('#context-projects .project-item').forEach(item => {\n      item.addEventListener('click', () => {\n        const projectId = parseInt(item.dataset.projectId || '0');\n        if (projectId) this.selectProject(projectId);\n      });\n    });\n\n    // Files\n    this.$$('#context-files .file-item').forEach(item => {\n      item.addEventListener('click', () => {\n        const fileId = parseInt(item.dataset.fileId || '0');\n        if (fileId) this.selectFile(fileId);\n      });\n    });\n\n    // Clear button\n    const clearBtn = this.$('#clear-context');\n    clearBtn?.addEventListener('click', () => this.clearContext());\n\n    this.bindChannelEvents();\n  }\n\n  private bindChannelEvents(): void {\n    this.$$('#context-channels .channel-item').forEach(item => {\n      item.addEventListener('click', () => {\n        const channelId = item.dataset.channel;\n        if (channelId) {\n          EventBus.emit('channel:selected', channelId);\n        }\n      });\n    });\n  }\n\n  private selectContact(contactName: string): void {\n    this.state.selectedContact = contactName;\n    this.state.selectedProject = null;\n    this.state.selectedFile = null;\n    this.state.recommendedChannels = [];\n    this.updateUI();\n    this.loadChannels();\n  }\n\n  private selectProject(projectId: number): void {\n    const contact = this.contacts.find(c => c.name === this.state.selectedContact);\n    const project = contact?.projects.find(p => p.id === projectId);\n    \n    if (project) {\n      this.state.selectedProject = project;\n      this.state.selectedFile = null;\n      this.updateUI();\n      this.loadChannels();\n    }\n  }\n\n  private selectFile(fileId: number): void {\n    const file = this.state.selectedProject?.files.find(f => f.id === fileId);\n    if (file) {\n      this.state.selectedFile = file;\n      this.updateUI();\n      this.loadChannels();\n    }\n  }\n\n  private clearContext(): void {\n    this.state = {\n      selectedContact: null,\n      selectedProject: null,\n      selectedFile: null,\n      recommendedChannels: [],\n    };\n    this.updateUI();\n    this.updateChannelsUI();\n    EventBus.emit('context:cleared');\n  }\n\n  private escapeHtml(text: string): string {\n    return text\n      .replace(/&/g, '&amp;')\n      .replace(/</g, '&lt;')\n      .replace(/>/g, '&gt;');\n  }\n}\n", "/**\n * SourcesPanel Component - Panel \u017Ar\u00F3de\u0142 danych prawnych\n */\nimport { Component, ComponentConfig, api, EventBus } from '../core/Component';\n\ninterface DataSource {\n  id: string;\n  name: string;\n  type: 'official' | 'commercial';\n  base_url: string;\n  description: string;\n  active: boolean;\n}\n\ninterface LegalDocument {\n  id: string;\n  title: string;\n  category: string;\n  url: string;\n}\n\ninterface SourcesPanelConfig extends ComponentConfig {\n  onSourceSelect?: (source: DataSource) => void;\n}\n\nexport class SourcesPanel extends Component<SourcesPanelConfig> {\n  private sources: DataSource[] = [];\n  private legalDocs: LegalDocument[] = [];\n  private activeTab: 'sources' | 'documents' = 'sources';\n  private filterType: 'all' | 'official' | 'commercial' = 'all';\n\n  render(): string {\n    return `\n      <div class=\"sources-panel-component\">\n        <div class=\"sources-tabs\">\n          <button class=\"tab-btn ${this.activeTab === 'sources' ? 'active' : ''}\" data-tab=\"sources\">\n            \uD83D\uDD17 \u0179r\u00F3d\u0142a danych\n          </button>\n          <button class=\"tab-btn ${this.activeTab === 'documents' ? 'active' : ''}\" data-tab=\"documents\">\n            \uD83D\uDCDC Akty prawne\n          </button>\n        </div>\n\n        <div class=\"sources-filter\">\n          <select class=\"filter-select\" id=\"source-type-filter\">\n            <option value=\"all\" ${this.filterType === 'all' ? 'selected' : ''}>Wszystkie</option>\n            <option value=\"official\" ${this.filterType === 'official' ? 'selected' : ''}>Urz\u0119dowe</option>\n            <option value=\"commercial\" ${this.filterType === 'commercial' ? 'selected' : ''}>Komercyjne</option>\n          </select>\n        </div>\n\n        <div class=\"sources-content\">\n          ${this.activeTab === 'sources' ? this.renderSources() : this.renderDocuments()}\n        </div>\n\n        <div class=\"sources-verify\">\n          <h4>\uD83D\uDD0D Weryfikacja podmiotu</h4>\n          <div class=\"verify-form\">\n            <input type=\"text\" id=\"verify-input\" placeholder=\"NIP, KRS lub VAT UE (np. PL1234567890)\">\n            <select id=\"verify-type\">\n              <option value=\"nip\">NIP (CEIDG)</option>\n              <option value=\"krs\">KRS</option>\n              <option value=\"vat_eu\">VAT UE (VIES)</option>\n            </select>\n            <button type=\"button\" id=\"verify-btn\" class=\"verify-button\">Sprawd\u017A</button>\n          </div>\n          <div id=\"verify-result\" class=\"verify-result\"></div>\n        </div>\n      </div>\n    `;\n  }\n\n  private renderSources(): string {\n    const filtered = this.sources.filter(s => \n      this.filterType === 'all' || s.type === this.filterType\n    );\n\n    if (!filtered.length) {\n      return '<div class=\"sources-empty\">\u0141adowanie \u017Ar\u00F3de\u0142...</div>';\n    }\n\n    return `\n      <ul class=\"sources-list-component\">\n        ${filtered.map(source => `\n          <li class=\"source-item ${source.active ? '' : 'inactive'}\" data-source-id=\"${source.id}\">\n            <div class=\"source-header\">\n              <span class=\"source-type-badge ${source.type}\">${source.type === 'official' ? '\uD83C\uDFDB\uFE0F' : '\uD83D\uDCBC'}</span>\n              <span class=\"source-name\">${this.escapeHtml(source.name)}</span>\n              <span class=\"source-status ${source.active ? 'active' : 'inactive'}\">\n                ${source.active ? '\u2705' : '\uD83D\uDD11'}\n              </span>\n            </div>\n            <div class=\"source-description\">${this.escapeHtml(source.description)}</div>\n            <a href=\"${source.base_url}\" target=\"_blank\" class=\"source-url\">${source.base_url}</a>\n          </li>\n        `).join('')}\n      </ul>\n    `;\n  }\n\n  private renderDocuments(): string {\n    if (!this.legalDocs.length) {\n      return '<div class=\"sources-empty\">\u0141adowanie dokument\u00F3w...</div>';\n    }\n\n    const grouped = this.groupByCategory(this.legalDocs);\n\n    return `\n      <div class=\"legal-docs-list\">\n        ${Object.entries(grouped).map(([category, docs]) => `\n          <div class=\"docs-category\">\n            <h5 class=\"category-header\">${this.getCategoryLabel(category)}</h5>\n            <ul class=\"docs-list\">\n              ${docs.map(doc => `\n                <li class=\"doc-item\">\n                  <a href=\"${doc.url}\" target=\"_blank\" class=\"doc-link\">\n                    <span class=\"doc-title\">${this.escapeHtml(doc.title)}</span>\n                    <span class=\"doc-id\">${doc.id}</span>\n                  </a>\n                </li>\n              `).join('')}\n            </ul>\n          </div>\n        `).join('')}\n      </div>\n    `;\n  }\n\n  private groupByCategory(docs: LegalDocument[]): Record<string, LegalDocument[]> {\n    return docs.reduce((acc, doc) => {\n      if (!acc[doc.category]) acc[doc.category] = [];\n      acc[doc.category].push(doc);\n      return acc;\n    }, {} as Record<string, LegalDocument[]>);\n  }\n\n  private getCategoryLabel(category: string): string {\n    const labels: Record<string, string> = {\n      ksef: '\uD83D\uDCC4 KSeF',\n      vat: '\uD83D\uDCB0 VAT',\n      b2b: '\uD83D\uDCBC B2B / Prawo pracy',\n      zus: '\uD83C\uDFE5 ZUS',\n    };\n    return labels[category] || category;\n  }\n\n  protected async afterMount(): Promise<void> {\n    await this.loadData();\n  }\n\n  private async loadData(): Promise<void> {\n    try {\n      const [sources, docs] = await Promise.all([\n        api.get<DataSource[]>('/sources'),\n        api.get<LegalDocument[]>('/legal-documents'),\n      ]);\n      this.sources = sources;\n      this.legalDocs = docs;\n      this.updateContent();\n    } catch (e) {\n      console.error('Error loading sources data:', e);\n    }\n  }\n\n  private updateContent(): void {\n    const content = this.$('.sources-content');\n    if (content) {\n      content.innerHTML = this.activeTab === 'sources' \n        ? this.renderSources() \n        : this.renderDocuments();\n    }\n  }\n\n  protected bindEvents(): void {\n    // Tab switching\n    this.$$('.tab-btn').forEach(btn => {\n      btn.addEventListener('click', () => {\n        this.activeTab = btn.dataset.tab as 'sources' | 'documents';\n        this.$$('.tab-btn').forEach(b => b.classList.remove('active'));\n        btn.classList.add('active');\n        this.updateContent();\n      });\n    });\n\n    // Filter\n    const filterSelect = this.$('#source-type-filter') as HTMLSelectElement;\n    filterSelect?.addEventListener('change', () => {\n      this.filterType = filterSelect.value as 'all' | 'official' | 'commercial';\n      this.updateContent();\n    });\n\n    // Verify button\n    const verifyBtn = this.$('#verify-btn');\n    verifyBtn?.addEventListener('click', () => this.handleVerify());\n\n    // Enter to verify\n    const verifyInput = this.$('#verify-input') as HTMLInputElement;\n    verifyInput?.addEventListener('keydown', (e) => {\n      if (e.key === 'Enter') this.handleVerify();\n    });\n  }\n\n  private async handleVerify(): Promise<void> {\n    const input = this.$('#verify-input') as HTMLInputElement;\n    const typeSelect = this.$('#verify-type') as HTMLSelectElement;\n    const resultDiv = this.$('#verify-result');\n\n    if (!input || !typeSelect || !resultDiv) return;\n\n    const identifier = input.value.trim();\n    if (!identifier) {\n      resultDiv.innerHTML = '<span class=\"error\">Wprowad\u017A identyfikator</span>';\n      return;\n    }\n\n    resultDiv.innerHTML = '<span class=\"loading\">Weryfikuj\u0119...</span>';\n\n    try {\n      const result = await api.post<{\n        valid: boolean;\n        identifier: string;\n        type: string;\n        data?: any;\n        error?: string;\n      }>('/verify', {\n        identifier,\n        type: typeSelect.value,\n      });\n\n      if (result.valid) {\n        resultDiv.innerHTML = `\n          <div class=\"verify-success\">\n            <strong>\u2705 Zweryfikowano:</strong> ${this.escapeHtml(identifier)}<br>\n            ${result.data?.name ? `<strong>Nazwa:</strong> ${this.escapeHtml(result.data.name)}<br>` : ''}\n            ${result.data?.address ? `<strong>Adres:</strong> ${this.escapeHtml(result.data.address)}` : ''}\n          </div>\n        `;\n        EventBus.emit('entity:verified', result);\n      } else {\n        resultDiv.innerHTML = `\n          <div class=\"verify-error\">\n            \u274C ${result.error || 'Nie znaleziono'}\n          </div>\n        `;\n      }\n    } catch (e) {\n      resultDiv.innerHTML = '<span class=\"error\">B\u0142\u0105d weryfikacji</span>';\n    }\n  }\n\n  private escapeHtml(text: string): string {\n    return text\n      .replace(/&/g, '&amp;')\n      .replace(/</g, '&lt;')\n      .replace(/>/g, '&gt;');\n  }\n}\n", "/**\n * Bielik Frontend - Main Entry Point\n * ===================================\n * Inicjalizacja aplikacji z komponentami TypeScript\n */\n\n// Legacy UI modules (backward compatibility)\nimport { initChat } from './ui/chat';\nimport { initDocumentsPanel } from './ui/documents';\nimport { initProjectsPanel } from './ui/projects';\nimport { initDashboardLayout } from './ui/dashboard';\n\n// New Component-based architecture\nimport { Header } from './components/Header';\nimport { ChatPanel } from './components/ChatPanel';\nimport { ContextPanel } from './components/ContextPanel';\nimport { SourcesPanel } from './components/SourcesPanel';\nimport { EventBus } from './core/Component';\n\ninterface AppConfig {\n  useNewComponents: boolean;\n}\n\nconst config: AppConfig = {\n  // Set to true to use new component architecture\n  // Set to false for backward compatibility with existing HTML\n  useNewComponents: false,\n};\n\n/**\n * Initialize with legacy modules (existing HTML structure)\n */\nfunction initLegacy(): void {\n  initChat();\n  initDocumentsPanel();\n  initProjectsPanel();\n  initDashboardLayout();\n  \n  // Initialize new SourcesPanel if container exists\n  const sourcesContainer = document.getElementById('sources-data-panel');\n  if (sourcesContainer) {\n    new SourcesPanel({ container: sourcesContainer }).mount();\n  }\n}\n\n/**\n * Initialize with new component architecture\n */\nfunction initComponents(): void {\n  // Header\n  const headerContainer = document.getElementById('app-header');\n  if (headerContainer) {\n    new Header({ container: headerContainer }).mount();\n  }\n\n  // Chat Panel\n  const chatContainer = document.getElementById('app-chat');\n  if (chatContainer) {\n    new ChatPanel({ container: chatContainer }).mount();\n  }\n\n  // Context Panel\n  const contextContainer = document.getElementById('app-context');\n  if (contextContainer) {\n    new ContextPanel({ container: contextContainer }).mount();\n  }\n\n  // Sources Panel\n  const sourcesContainer = document.getElementById('app-sources');\n  if (sourcesContainer) {\n    new SourcesPanel({ container: sourcesContainer }).mount();\n  }\n\n  // Documents Panel (legacy)\n  initDocumentsPanel();\n\n  // Projects Panel (legacy)  \n  initProjectsPanel();\n\n  // Dashboard Layout\n  initDashboardLayout();\n}\n\n/**\n * Bootstrap application\n */\nexport function bootstrap(): void {\n  document.addEventListener('DOMContentLoaded', () => {\n    try {\n      console.log('\uD83E\uDD85 Bielik Frontend initializing...');\n      \n      if (config.useNewComponents) {\n        initComponents();\n        console.log('\u2705 Components initialized');\n      } else {\n        initLegacy();\n        console.log('\u2705 Legacy modules initialized');\n      }\n\n      // Global event listeners\n      EventBus.on('context:changed', (state) => {\n        console.log('Context changed:', state);\n      });\n\n      EventBus.on('entity:verified', (result) => {\n        console.log('Entity verified:', result);\n      });\n\n    } catch (e) {\n      console.error('\u274C B\u0142\u0105d inicjalizacji frontendu:', e);\n    }\n  });\n}\n\n// Auto-bootstrap\nbootstrap();\n\n// Export for external use\nexport { EventBus } from './core/Component';\nexport { Header } from './components/Header';\nexport { ChatPanel } from './components/ChatPanel';\nexport { ContextPanel } from './components/ContextPanel';\nexport { SourcesPanel } from './components/SourcesPanel';\n"],
  "mappings": "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",
  "names": ["API_URL", "escapeHtml", "API_URL", "getElements", "escapeHtml", "API_URL", "getElements", "config", "config", "MODULES", "isLoading"]
}
